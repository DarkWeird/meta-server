plugins {
    id "org.standardout.versioneye" version "1.0.1"
}

apply plugin:'java'
apply plugin:'application'
apply plugin:'eclipse'

apply from: 'config/gradle/versioning.gradle'

mainClassName = "org.terasology.web.JettyMain"
applicationName = "meta-server"

group = 'org.terasology.web'

repositories {
    mavenCentral()
	
    maven {
        url "http://artifactory.terasology.org/artifactory/virtual-repo-live"
    }
}

dependencies {
    compile 'org.eclipse.jetty:jetty-servlet:9.2.10.v20150310'
    compile 'javax.servlet:javax.servlet-api:3.1.0'

    compile 'org.glassfish.jersey.containers:jersey-container-jetty-servlet:2.17'
    compile 'org.glassfish.jersey.ext:jersey-mvc-freemarker:2.17'

    compile 'com.google.code.gson:gson:2.3.1'
    compile 'com.google.guava:guava:18.0'

    compile 'org.jooq:jooq:3.6.1'
    compile 'org.postgresql:postgresql:9.4-1201-jdbc41'

    compile 'com.squareup.retrofit:retrofit:1.9.0'

    compile 'org.slf4j:slf4j-api:1.7.12'

    compile 'com.zaxxer:HikariCP:2.3.8'

    compile 'org.terasology:gestalt-module:4.0.3'

    testCompile 'org.jsoup:jsoup:1.8.2'
    testCompile 'com.jcabi:jcabi-w3c:1.2'
    testCompile 'com.jcabi:jcabi-matchers:1.3'
    testCompile 'junit:junit:4.12'
    testCompile 'com.h2database:h2:1.4.187'

    runtime group: 'ch.qos.logback', name: 'logback-classic', version: '1.1.3'
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.4'
}

test {
    // ignoreFailures: Specifies whether the build should break when the verifications performed by this task fail.
    ignoreFailures = true

    // showStandardStreams: makes the standard streams (err and out) visible at console when running tests
    testLogging.showStandardStreams = true
}

distributions {
    main {
        contents {
            from('.') {
                include 'templates/'
                include 'web/'
            }
        }
    }
}

task stage(dependsOn: ['clean', 'installDist'])
